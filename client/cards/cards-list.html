<bsnxpnav></bsnxpnav>
<div class="row cbp-af-header" id="video-container-outer">
        <videoplayer></videoplayer>
      
</div>
 <div id="videomodal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog-video">
  <!-- <div class="modal-dialog"> -->
    <div class="modal-content">
      <div class="modal-body">
        <h2>Top 5 links </h2>
        <img src="http://www.nxp.com/files/graphic/banner/tn_pu/UNWIND-AFTER-ALL-THE-TRAINING-TN.jpg" alt="" class="img-responsive">
        <ul>
          <li><a href="#">Link 1</a></li>
          <li><a href="#">Link 2</a></li>
          <li><a href="#">Link 3</a></li>
          <li><a href="#">Link 4</a></li>
          <li><a href="#">Link 5</a></li>
        </ul>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-xs" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<div class="container-wrapper">
<div id="slide-row" class="row" >
    <section class="col-md-9">
       <section class="row">
        <article class="col-md-6 animate-repeat slide item-container" ng-repeat="card in cards  | orderBy:'-order' | filter:{public:true}">             
            <div class="item dtmFTFDiv" data-dtmSection="Content Card" id="{{card._id}}"  cardid="{{card._id}}" >
                <div class="cardContent" >
                    <!-- <div class="caption" ui-sref="cardDetails({ cardId: card._id })"> -->
                    <div class="caption" >
                        <div><span ng-bind-html="card.content | html"></span></div>
                        
                       <!--  <div class="title text-center">
                            public: {{card.public}}
                        </div>
                        
                        <div class="text-center">
                                sync time: {{card.time}}
                        </div> -->
                    </div>
                
                <div class="item-footer"  ng-show="{{card.pageurl}}" >
                 <ul class="list-inline">
                   <li class="facebook"><a class="social-icon" social-facebook custom-url="{{currentUrl}}/{{card._id}}"><facebook-icon></facebook-icon></a></li>

                  <!--  <li class="facebook"><a class="social-icon" social-facebook2 custom-url="{{currentUrl}}/{{card._id}}" caption="#NXPFTF Check out what is happening at NXP FTF 2016"  title="{{card.title}}" description="{{card.description}}" image="{{card.image}}"><facebook-icon></facebook-icon></a></li> -->
                   
                    <li class="twitter"><a custom-url="{{currentUrl}}/{{card._id}}" class="social-icon" social-twitter status="The world's cities are getting smarter and more connected. Find out how. Watch streaming #NXPFTF keynote now {{currentUrl}}/{{card._id}} {{card.title}} {{card.description}}"  > <twitter-icon></twitter-icon></a> </li>
                  <li class="googleplus"><a class="social-icon" social-gplus custom-url="{{currentUrl}}/{{card._id}}" ><googleplus-icon></googleplus-icon></a></li>
                  <li class="linkedin"><a class="social-icon" social-linkedin custom-url="{{currentUrl}}/{{card._id}}"><linkedin-icon></linkedin-icon></a></li>
                  <li  class="email" ><a id="email" class="social-icon"  data-text="The world's cities are getting smarter and more connected. Find out how. Watch the NXP FTF keynote &body=The world's cities are getting smarter and more connected. Find out how. Watch the NXP FTF keynote. %0A%0A {{card.title}} {{card.description}}%0A%0A{{currentUrl}}/{{card._id}}">
                    <email-icon></email-icon></a></li>
                 </ul>
               </div>
            </div>

                
            </div>
        </article>
      </section>
    </section>  <!-- <section class="col-md-9"> -->

    <section class="col-md-3">
        <!-- <p>VideoTime: {{videoTime}}</p> -->
      <div id="affixTweets"  >
        <div class="tweets dtmFTFDiv" data-dtmSection="Twitter Feed" ng-controller="tweetsCtrl" >
            <h2>#NXPFTF</h2>
            <div class="tweets-container">
            <div class="tweet-row" ng-repeat="tweet in livetweets | orderBy:'-createdAt'" >
                  <span class="tweetItem" ng-bind-html="tweet.tweet | encodeTweet"></span>              
            </div>
            </div>
        </div>
      </div>

        <!-- Filler bottom -->
    <div id="stretch"></div>


    </section>
</div>
  </div>




<script>

var windowWidth = $(window).width();

$(window).resize(function(){
    var windowWidth = $(window).width();
    var scrollPos = $(document).scrollTop();
    // console.log('WindowWidth2',windowWidth);
    // console.log ('scroll pos2',scrollPos);
    if (windowWidth<991) {
    // if (windowWidth<768) {
      $('#affixTweets').removeClass('affix');
      // $('#video-container').css({'height':'100px'});
    } else
    {
      if (scrollPos >=330){
        $('#affixTweets').addClass('affix');
        $('#video-container').css('height','250px');
      }  else {
        $('#affixTweets').removeClass('affix');
        $('#video-container').css('height','500px');
      }
    }
});

$(window).scroll(function(){
    var scrollPos = $(document).scrollTop();
    var windowWidth = $(window).width();
    // console.log('WindowWidth',windowWidth);
    // console.log ('scrollPos',scrollPos)
    if (scrollPos >= 330  ) { 
      if (windowWidth>992) { 
      // if (windowWidth>768) { 
        $('#affixTweets').addClass('affix'); 
        $('#video-container').css({'height':'100px'});
      } else {
        // $('#video-container').css({'height':'100px', 'width':'100px', 'margin':'0px'});

      }
        // console.log ('scrollPos is >= 330')
        // $('#video-container-outer').addClass('video-container-shrunk');
      // $('#video-container').css({'height':'100px'});
      $('.cbp-af-header').addClass("cbp-af-header-shrink");
      $('#slide-row').css('margin-top','510px');
      // $('.cbp-af-header.cbp-af-header-shrink #fslPlayer').css({'height':'100px!important','width':'100px!important'})
      
    } else {
      $('#affixTweets').removeClass('affix');

        // console.log ('scrollPos is <= 330')
      if (windowWidth>992) { 
      // if (windowWidth>768) { 
        $('#video-container').css('height','500px');
      } else {
        $('#video-container').css('height','250px');
      }
      $('.cbp-af-header').removeClass("cbp-af-header-shrink");
      // $('#video-container-outer').removeClass('video-container-shrunk');
      $('#slide-row').css('margin-top','20px');
    }
});

// $('#affixTweets').affix({ offset: {top: 400} })

$.getScript("http://www.nxp.com/files/header/newco-nav.js", function(){  
    if (typeof NXP.top_nav != 'undefined') {
          $('.navbar-collapse').html(NXP.top_nav);
          $('ul.nav.navbar-nav').append('<li class="dropdown"><a href="//www.nxp.com/ruhp" class="dropdown-toggle">MY ACCOUNT</a></li><li class="dropdown"><a href="//www.nxp.com/search" class="dropdown-toggle">SEARCH</a></li>')
    } // load top nav elements
    $('#header .dropdown-menu a').attr('target', '_blank');
})
</script>


<script>

  

  jQuery(document).ready(function($) {
    

    $.getScript('http://style.nxp.com/files/brightcove/ftf16_player.min.js')
      .done(function(script,textStatus){
        console.log ('loaded ftf16_player');
        // # Show poster at the end of the video
        $('video').on('ended',function(){
          $('video')[0].autoplay=false
          $('video')[0].load();
          console.log ('VIDEO HAS ENDED')
          $('#videomodal').modal('show');
        });
      });

    $.getScript('http://players.brightcove.net/videojs-social/dist/videojs-social.min.js')
      .done(function(script,textStatus){
        console.log ('loaded videojs-social.min.js');
      });
    $.getScript('http://style.nxp.com/files/js/elqNow/elqwebanalytics.js')
      .done(function(script,textStatus){
        console.log ('loaded elqwebanalytics');
      });
    $.getScript('http://style.nxp.com/files/abstract/misc/blueconic.js')
      .done(function(script,textStatus){
        console.log ('loaded blueconic');
      });
    $.getScript('http://style.nxp.com/files/brightcove/analytics/src/analytics.custom.mapping.ftf16.js')
      .done(function(script,textStatus){
        console.log ('loaded custom.mapping.ftf16');
      });
    // if (typeof _satellite !== "undefined") { _satellite.pageBottom(); }


    $('.container-wrapper').delegate('a','click',function(e){
        if ( $(this).is('#email') != true ) { 
          $(this).attr('target', '_blank');
        } else {
          e.preventDefault();
          t = $(this).attr('data-text')
          window.location.href="mailto:?subject="+t
        }
      });

   });

</script>

